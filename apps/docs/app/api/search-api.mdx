# Search API

The Search API is the core of Findoora's functionality, allowing you to programmatically search through content with the same power available in the web interface.

## Base Endpoint

```
GET https://api.findoora.com/v1/search
```

## Quick Start

### Simple Search

```bash
curl -H "Authorization: Bearer YOUR_API_KEY" \
     "https://api.findoora.com/v1/search?q=documentation"
```

### Response

```json
{
  "success": true,
  "data": {
    "results": [
      {
        "id": "doc_123456",
        "title": "API Documentation",
        "content_preview": "Complete guide to using the Findoora API...",
        "type": "document",
        "source": "google_drive",
        "url": "https://docs.google.com/document/d/abc123",
        "created_at": "2024-01-15T10:30:00Z",
        "modified_at": "2024-01-20T14:45:00Z",
        "size": 2048,
        "author": "John Doe",
        "tags": ["api", "documentation", "guide"],
        "relevance_score": 0.95
      }
    ],
    "total": 42,
    "query_time": 0.156
  },
  "meta": {
    "page": 1,
    "per_page": 20,
    "total_pages": 3
  }
}
```

## Request Parameters

### Required Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| **q** | string | Search query (max 500 characters) |

### Optional Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| **page** | integer | 1 | Page number for pagination |
| **per_page** | integer | 20 | Results per page (max 100) |
| **sort** | string | "relevance" | Sort order: `relevance`, `date`, `name`, `size` |
| **order** | string | "desc" | Sort direction: `asc`, `desc` |
| **type** | string | all | Filter by content type |
| **source** | string | all | Filter by source application |
| **date_from** | string | - | ISO 8601 date (e.g., "2024-01-01") |
| **date_to** | string | - | ISO 8601 date (e.g., "2024-12-31") |
| **size_min** | integer | - | Minimum file size in bytes |
| **size_max** | integer | - | Maximum file size in bytes |
| **author** | string | - | Filter by content author |
| **tags** | string | - | Comma-separated list of tags |
| **collections** | string | - | Comma-separated collection IDs |
| **include_content** | boolean | false | Include full content in response |
| **highlight** | boolean | true | Highlight search terms in snippets |

## Advanced Query Syntax

The `q` parameter supports advanced search operators:

### Text Operators

```bash
# Exact phrases
curl "https://api.findoora.com/v1/search?q=\"project management\""

# Boolean operators
curl "https://api.findoora.com/v1/search?q=budget AND (2024 OR 2025)"

# Wildcards
curl "https://api.findoora.com/v1/search?q=develop*"

# Field-specific search
curl "https://api.findoora.com/v1/search?q=title:\"quarterly report\""
```

### Date Operators

```bash
# Specific date
curl "https://api.findoora.com/v1/search?q=date:2024-01-15"

# Date ranges
curl "https://api.findoora.com/v1/search?q=date:2024-01-01..2024-01-31"

# Relative dates
curl "https://api.findoora.com/v1/search?q=date:last-week"
```

### Content Filters

```bash
# File type
curl "https://api.findoora.com/v1/search?q=type:pdf"

# Source application
curl "https://api.findoora.com/v1/search?q=source:gmail"

# Author
curl "https://api.findoora.com/v1/search?q=author:john"
```

## Response Format

### Success Response

```json
{
  "success": true,
  "data": {
    "results": [
      {
        "id": "unique_content_id",
        "title": "Content Title",
        "content_preview": "Snippet of content with highlighted terms...",
        "type": "document|image|webpage|message",
        "source": "source_application_name",
        "url": "original_content_url",
        "thumbnail": "thumbnail_image_url",
        "created_at": "2024-01-15T10:30:00Z",
        "modified_at": "2024-01-20T14:45:00Z",
        "accessed_at": "2024-01-21T09:15:00Z",
        "size": 2048,
        "format": "pdf|docx|jpg|html|etc",
        "author": "Content Author",
        "author_email": "author@example.com",
        "tags": ["tag1", "tag2"],
        "collections": ["collection_id_1", "collection_id_2"],
        "permissions": {
          "can_view": true,
          "can_edit": false,
          "can_share": true
        },
        "metadata": {
          "language": "en",
          "word_count": 1024,
          "page_count": 5
        },
        "relevance_score": 0.95,
        "highlights": {
          "title": ["<mark>search</mark> term"],
          "content": ["Content with <mark>highlighted</mark> terms"]
        }
      }
    ],
    "total": 42,
    "query_time": 0.156,
    "suggestions": [
      "alternative search term",
      "related query"
    ],
    "facets": {
      "types": {
        "document": 25,
        "image": 10,
        "webpage": 7
      },
      "sources": {
        "google_drive": 15,
        "gmail": 12,
        "slack": 8
      },
      "authors": {
        "john.doe": 5,
        "jane.smith": 3
      }
    }
  },
  "meta": {
    "page": 1,
    "per_page": 20,
    "total_pages": 3,
    "has_next": true,
    "has_previous": false
  }
}
```

### Error Response

```json
{
  "success": false,
  "error": {
    "code": "INVALID_QUERY",
    "message": "The search query contains invalid syntax",
    "details": {
      "query": "invalid query syntax",
      "position": 15,
      "expected": "closing quote"
    }
  }
}
```

## Filtering Examples

### By Content Type

import { Tabs, Tab } from 'nextra/components'

<Tabs items={['Documents', 'Images', 'Web Content', 'Messages']}>
  <Tab>
    ```bash
    # All documents
    curl "https://api.findoora.com/v1/search?q=*&type=document"
    
    # Specific document types
    curl "https://api.findoora.com/v1/search?q=budget&type=document&format=pdf"
    
    # Large documents
    curl "https://api.findoora.com/v1/search?q=*&type=document&size_min=1048576"
    ```
  </Tab>
  <Tab>
    ```bash
    # All images
    curl "https://api.findoora.com/v1/search?q=*&type=image"
    
    # Screenshots
    curl "https://api.findoora.com/v1/search?q=screenshot&type=image"
    
    # Recent images
    curl "https://api.findoora.com/v1/search?q=*&type=image&date_from=2024-01-01"
    ```
  </Tab>
  <Tab>
    ```bash
    # Web pages
    curl "https://api.findoora.com/v1/search?q=*&type=webpage"
    
    # Bookmarks
    curl "https://api.findoora.com/v1/search?q=bookmark&type=webpage"
    
    # Specific domains
    curl "https://api.findoora.com/v1/search?q=site:github.com&type=webpage"
    ```
  </Tab>
  <Tab>
    ```bash
    # Email messages
    curl "https://api.findoora.com/v1/search?q=*&type=message&source=gmail"
    
    # Chat messages
    curl "https://api.findoora.com/v1/search?q=*&type=message&source=slack"
    
    # From specific person
    curl "https://api.findoora.com/v1/search?q=*&type=message&author=john.doe"
    ```
  </Tab>
</Tabs>

### By Date Range

```bash
# This week
curl "https://api.findoora.com/v1/search?q=meeting&date_from=2024-01-15&date_to=2024-01-22"

# Last month
curl "https://api.findoora.com/v1/search?q=report&date_from=2023-12-01&date_to=2023-12-31"

# Older than 1 year
curl "https://api.findoora.com/v1/search?q=*&date_to=2023-01-01"
```

### By Source Application

```bash
# Google Drive files
curl "https://api.findoora.com/v1/search?q=documentation&source=google_drive"

# Slack messages
curl "https://api.findoora.com/v1/search?q=deployment&source=slack"

# GitHub repositories
curl "https://api.findoora.com/v1/search?q=readme&source=github"

# Multiple sources
curl "https://api.findoora.com/v1/search?q=budget&source=gmail,google_drive"
```

## Pagination

Handle large result sets with pagination:

```javascript
async function getAllResults(query) {
  let allResults = [];
  let page = 1;
  let hasMore = true;
  
  while (hasMore) {
    const response = await fetch(
      `https://api.findoora.com/v1/search?q=${query}&page=${page}&per_page=100`,
      {
        headers: {
          'Authorization': 'Bearer YOUR_API_KEY'
        }
      }
    );
    
    const data = await response.json();
    allResults = allResults.concat(data.data.results);
    
    hasMore = data.meta.has_next;
    page++;
  }
  
  return allResults;
}
```

## Search Performance

### Optimization Tips

**Query Optimization:**
- Use specific terms rather than generic ones
- Apply filters to reduce result set size
- Use pagination for large result sets
- Cache frequently used searches

**Response Optimization:**
- Set `include_content=false` for faster responses
- Use smaller `per_page` values for initial results
- Request only needed fields
- Implement client-side caching

### Performance Metrics

Monitor search performance:

```json
{
  "data": {
    "query_time": 0.156,
    "total": 1000,
    "results": [...],
    "performance": {
      "index_time": 0.045,
      "filter_time": 0.032,
      "sort_time": 0.018,
      "total_time": 0.156
    }
  }
}
```

## Real-time Search

### Search Suggestions

Get real-time search suggestions as users type:

```bash
curl "https://api.findoora.com/v1/search/suggestions?q=doc&limit=5"
```

Response:
```json
{
  "suggestions": [
    "documentation",
    "documents",
    "docker",
    "docx files",
    "doctor appointment"
  ]
}
```

### Auto-complete

```bash
curl "https://api.findoora.com/v1/search/autocomplete?q=project%20man"
```

Response:
```json
{
  "completions": [
    "project management",
    "project manager",
    "project manual"
  ]
}
```

## Advanced Features

### Similar Content

Find content similar to a specific item:

```bash
curl "https://api.findoora.com/v1/search/similar/doc_123456"
```

### Search Analytics

Track search performance and patterns:

```bash
curl "https://api.findoora.com/v1/search/analytics?date_from=2024-01-01"
```

### Saved Searches

Manage saved search queries:

```bash
# Create saved search
curl -X POST "https://api.findoora.com/v1/search/saved" \
  -H "Content-Type: application/json" \
  -d '{"name": "Weekly Reports", "query": "report AND date:last-week"}'

# Execute saved search
curl "https://api.findoora.com/v1/search/saved/search_123/execute"
```

## Rate Limits

Search API rate limits by plan:

| Plan | Requests/Hour | Burst Limit |
|------|---------------|-------------|
| **Free** | 1,000 | 20/minute |
| **Pro** | 10,000 | 100/minute |
| **Enterprise** | 100,000 | 1,000/minute |

Monitor your usage:

```bash
curl -I "https://api.findoora.com/v1/search?q=test"
```

Response headers:
```
X-RateLimit-Limit: 10000
X-RateLimit-Remaining: 9999
X-RateLimit-Reset: 1609459200
```

## Error Handling

### Common Errors

| Code | Error | Solution |
|------|--------|----------|
| **400** | Invalid query syntax | Check query format and operators |
| **401** | Authentication failed | Verify API key |
| **403** | Insufficient permissions | Check account access |
| **429** | Rate limit exceeded | Implement backoff strategy |
| **500** | Internal server error | Retry with exponential backoff |

### Retry Strategy

```javascript
async function searchWithRetry(query, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      const response = await fetch(`https://api.findoora.com/v1/search?q=${query}`);
      
      if (response.status === 429) {
        // Rate limited, wait and retry
        const retryAfter = response.headers.get('Retry-After') || Math.pow(2, i);
        await new Promise(resolve => setTimeout(resolve, retryAfter * 1000));
        continue;
      }
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }
      
      return await response.json();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
    }
  }
}
```

## Next Steps

- Explore [Content API](/api/content-api) for managing search results
- Learn about [Webhooks](/api/webhooks) for real-time search notifications
- Check [Rate Limits](/api/rate-limits) for usage optimization
- See [SDK Libraries](/api/sdk-libraries) for language-specific implementations

Need help? Contact our [API support team](mailto:api-support@findoora.com) for search optimization assistance.
